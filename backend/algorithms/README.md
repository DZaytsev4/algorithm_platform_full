# 1. test_get_algorithms_for_regular_user
# Тест получения списка алгоритмов для обычного пользователя

## Описание теста

1) Тест проверяет корректность отображения списка алгоритмов для обычного зарегистрированного пользователя. Он проверяет, что пользователь видит только те алгоритмы, которые ему разрешено видеть согласно бизнес-логике приложения.

2) Тест делает это следующим образом: создает тестового пользователя, аутентифицирует его, отправляет GET-запрос к endpoint списка алгоритмов, затем проверяет, что в ответе присутствуют утвержденные алгоритмы, собственные алгоритмы пользователя (включая отклоненные), но отсутствуют отклоненные алгоритмы других пользователей. Также проверяется структура ответа и статус код 200 OK.

# 2. test_get_algorithms_for_moderator
# Тест получения списка алгоритмов для модератора

## Описание теста

1) Тест проверяет, что пользователь с правами модератора получает полный доступ ко всем алгоритмам в системе независимо от их статуса модерации.

2) Тест делает это следующим образом: создает пользователя с правами модератора, аутентифицирует его, отправляет GET-запрос к endpoint списка алгоритмов, затем проверяет, что в ответе присутствуют алгоритмы со всеми статусами (утвержденные, ожидающие модерации, отклоненные) от всех пользователей. Также проверяется корректность пагинации и статус код 200 OK.

# 3. test_algorithm_search_filter
# Тест фильтрации алгоритмов по поисковому запросу

## Описание теста

1) Тест проверяет работу поискового фильтра, который позволяет находить алгоритмы по ключевым словам в названии, описании и имени автора.

2) Тест делает это следующим образом: использует аутентифицированного модератора (чтобы видеть все алгоритмы), отправляет несколько GET-запросов с параметром 'q', содержащим разные поисковые запросы, затем проверяет, что в результатах поиска возвращаются только релевантные алгоритмы. Проверяются поиски по названию, описанию и автору с верификацией количества и содержания найденных записей.

# 4. test_create_algorithm_by_user
# Тест создания алгоритма пользователем

## Описание теста

1) Тест проверяет процесс создания нового алгоритма зарегистрированным пользователем, включая автоматическое присвоение автора, установку статуса "на модерации" и корректное сохранение всех полей.

2) Тест делает это следующим образом: аутентифицирует обычного пользователя, отправляет POST-запрос с данными нового алгоритма, затем проверяет статус код 201 Created, соответствие данных в ответе отправленным данным, автоматическое присвоение автора и статуса "pending". Дополнительно проверяется создание записи в базе данных и наличие всех дополнительных полей из сериализатора.

# 5. test_update_algorithm_by_author
# Тест обновления алгоритма автором

## Описание теста

1) Тест проверяет, что автор алгоритма может успешно редактировать свой алгоритм, включая изменение названия, описания, кода и тегов.

2) Тест делает это следующим образом: аутентифицирует пользователя-автора, отправляет PUT-запрос с обновленными данными алгоритма, проверяет статус код 200 OK, соответствие обновленных данных в ответе, а затем дополнительно проверяет непосредственно в базе данных, что изменения действительно сохранились. Также тест учитывает бизнес-логику сброса статуса модерации при редактировании.

# 6. test_update_algorithm_by_non_author
# Тест обновления алгоритма не-автором

## Описание теста

1) Тест проверяет систему безопасности, обеспечивающую защиту от несанкционированного редактирования алгоритмов другими пользователями.

2) Тест делает это следующим образом: аутентифицирует пользователя, который не является автором алгоритма, отправляет PUT-запрос на изменение чужого алгоритма, затем проверяет, что система возвращает статус код 404 Not Found (алгоритм не найден в queryset пользователя) и что исходные данные алгоритма в базе данных остаются неизменными.

# 7. test_delete_algorithm_by_author
# Тест удаления алгоритма автором

## Описание теста

1) Тест проверяет, что автор алгоритма может успешно удалить свой алгоритм из системы.

2) Тест делает это следующим образом: аутентифицирует пользователя-автора, отправляет DELETE-запрос на endpoint удаления алгоритма, проверяет статус код 204 No Content, а затем дополнительно проверяет в базе данных, что запись алгоритма действительно была удалена и больше не существует.

# 8. test_delete_algorithm_by_non_author
# Тест удаления алгоритма не-автором

## Описание теста

1) Тест проверяет систему защиты от несанкционированного удаления алгоритмов, обеспечивая что только автор может удалять свои алгоритмы.

2) Тест делает это следующим образом: аутентифицирует пользователя, который не является автором алгоритма, отправляет DELETE-запрос на удаление чужого алгоритма, проверяет что система возвращает статус код 404 Not Found (алгоритм не найден для этого пользователя), а затем дополнительно проверяет в базе данных, что запись алгоритма осталась нетронутой и не была удалена.

# 9. test_moderation_list_access_for_moderator
# Тест доступа к списку модерации для модератора

## Описание теста

1) Тест проверяет, что пользователи с правами модератора имеют доступ к специальному endpoint со списком алгоритмов, ожидающих модерации.

2) Тест делает это следующим образом: аутентифицирует пользователя-модератора, отправляет GET-запрос к endpoint списка модерации, проверяет статус код 200 OK, что ответ содержит только алгоритмы со статусом "ожидающий" (pending), и что количество и содержание этих алгоритмов соответствует ожиданиям. Также проверяется что endpoint не использует пагинацию.

# 10. test_moderation_list_access_for_regular_user
# Тест доступа к списку модерации для обычного пользователя

## Описание теста

1) Тест проверяет систему защиты endpoint модерации, обеспечивая что обычные пользователи не могут получить доступ к списку алгоритмов на модерации.

2) Тест делает это следующим образом: аутентифицирует обычного пользователя без прав модератора, отправляет GET-запрос к endpoint списка модерации, затем проверяет что система возвращает статус код 403 Forbidden, тем самым подтверждая что доступ к функционалу модерации ограничен только для уполномоченных пользователей.

# 11. test_approve_algorithm_by_moderator
# Тест утверждения алгоритма модератором

## Описание теста

1) Тест проверяет процесс утверждения алгоритма модератором, включая изменение статуса алгоритма и запись информации о модераторе и времени модерации.

2) Тест делает это следующим образом: аутентифицирует пользователя-модератора, отправляет POST-запрос на endpoint модерации с указанием статуса "approved", проверяет статус код 200 OK и что в ответе алгоритм имеет статус "утвержден". Затем дополнительно проверяет в базе данных, что статус алгоритма изменился, указан модератор и время модерации.

# 12. test_reject_algorithm_by_moderator
# Тест отклонения алгоритма модератором

## Описание теста

1) Тест проверяет процесс отклонения алгоритма модератором, включая установку статуса "отклонен", указание причины отклонения и запись метаданных модерации.

2) Тест делает это следующим образом: аутентифицирует пользователя-модератора, отправляет POST-запрос на endpoint модерации с указанием статуса "rejected" и причины отклонения, проверяет статус код 200 OK и что в ответе алгоритм имеет статус "отклонен" с указанной причиной. Затем дополнительно проверяет в базе данных, что все данные модерации корректно сохранились.